---
import type { ComponentProps } from "astro/types";
import HeaderSection, { HeaderSection_Query } from "@/components/global/HeaderSection.astro";

export type ComponentsProps = ComponentProps<typeof HeaderSection> & { _type: string; index: number }[];

type Props = {
  data: ComponentsProps;
};

const { data } = Astro.props;

const components = {
  HeaderSection,
};

export const Components_Query = /* groq */ `
  components[] {
    _type,
    ${HeaderSection_Query}
  },
`;
---

{
  data.map((item, i) => {
    const DynamicComponent = components[item._type];
    if (!DynamicComponent) return null;
    return <DynamicComponent {...item} index={i} />;
  })
}
