---
import Button, { ButtonDataQuery, type ButtonDataTypes } from "@/components/ui/Button.astro";
import Markdown from "@/components/ui/markdown.astro";

export const EffectiveApproach_Query = `
  heading,
  paragraph,
  cta {
    ${ButtonDataQuery}
  }[],
  items[],
`;

export type Props = {
  index: number;
  heading: string;
  paragraph: string;
  cta: ButtonDataTypes[];
  items: string[];
};

const { index, heading, paragraph, cta, items } = Astro.props;
---

<section class='EffectiveApproach'>
  <div class='wrapper'>
    <svg xmlns='http://www.w3.org/2000/svg' width='393' height='267' fill='none' class='logo' viewBox='0 0 393 267'>
      <g>
        <path
          fill='#109288'
          d='M122.747 194.383c-2.182 0-4.364-.582-6.401-1.746L7.24 129.792c-6.11-3.492-8.292-11.493-4.655-17.603 3.491-6.11 11.492-8.292 17.602-4.655l108.961 62.845c6.11 3.492 8.292 11.493 4.655 17.603-2.327 4.073-6.692 6.401-11.201 6.401h.145Z'
        >
        </path>
        <path
          fill='#03413B'
          d='M45.355 149.721c-2.182 0-4.365-.582-6.401-1.746L7.24 129.646c-6.11-3.492-8.292-11.493-4.655-17.603 3.491-6.11 11.492-8.292 17.602-4.655l31.714 18.33c6.11 3.491 8.292 11.492 4.655 17.602-2.328 4.074-6.692 6.401-11.201 6.401Z'
        >
        </path>
      </g>
      <g>
        <path
          fill='#109288'
          d='M153.879 163.249c-4.51 0-8.729-2.327-11.202-6.401L79.832 47.742c-3.491-6.11-1.455-14.11 4.655-17.602 6.11-3.637 14.111-1.455 17.603 4.655l62.845 108.961c3.491 6.11 1.455 14.111-4.655 17.602-2.037 1.164-4.219 1.746-6.401 1.746v.145Z'
        >
        </path>
        <path
          fill='#03413B'
          d='M120.274 104.915c-4.51 0-8.728-2.328-11.201-6.4l-29.24-50.626c-3.492-6.11-1.456-14.111 4.654-17.603 6.11-3.636 14.111-1.454 17.603 4.656l29.24 50.625c3.492 6.11 1.455 14.11-4.655 17.602-2.037 1.164-4.219 1.746-6.401 1.746Z'
        >
        </path>
      </g>
      <g>
        <path
          fill='#109288'
          d='M196.501 151.758c-7.128 0-12.947-5.819-12.947-12.948V13.12c0-7.128 5.819-12.947 12.947-12.947 7.128 0 12.947 5.82 12.947 12.947v125.836c0 7.128-5.819 12.947-12.947 12.947v-.145Z'
        >
        </path>
        <path
          fill='#03413B'
          d='M196.501 106.37c-7.128 0-12.947-5.819-12.947-12.948V13.12c0-7.128 5.819-12.947 12.947-12.947 7.128 0 12.947 5.82 12.947 12.947v80.448c0 7.128-5.819 12.947-12.947 12.947v-.145Z'
        >
        </path>
      </g>
      <g>
        <path
          fill='#109288'
          d='M239.125 163.25c-2.182 0-4.364-.582-6.401-1.745-6.11-3.492-8.292-11.493-4.655-17.603l62.845-108.96c3.491-6.11 11.492-8.292 17.602-4.656 6.11 3.492 8.292 11.493 4.656 17.603l-62.845 108.96c-2.328 4.074-6.692 6.401-11.202 6.401Z'
        >
        </path>
        <path
          fill='#03413B'
          d='M272.885 104.918c-2.182 0-4.364-.582-6.401-1.745-6.11-3.492-8.292-11.493-4.655-17.603l29.241-50.625c3.491-6.11 11.492-8.292 17.602-4.655 6.11 3.491 8.292 11.492 4.655 17.602l-29.24 50.625c-2.328 4.074-6.692 6.401-11.202 6.401Z'
        >
        </path>
      </g>
      <g>
        <path
          fill='#109288'
          d='M270.409 194.383c-4.51 0-8.728-2.328-11.201-6.401-3.492-6.11-1.455-14.111 4.655-17.603l108.96-62.845c6.11-3.637 14.111-1.455 17.603 4.655 3.491 6.11 1.455 14.111-4.655 17.603L276.81 192.637c-2.037 1.164-4.219 1.746-6.401 1.746Z'
        >
        </path>
        <path
          fill='#03413B'
          d='M347.802 149.721c-4.509 0-8.728-2.327-11.201-6.401-3.492-6.11-1.455-14.111 4.655-17.602l31.713-18.33c6.11-3.637 14.111-1.455 17.603 4.655 3.491 6.11 1.455 14.111-4.655 17.603l-31.714 18.329c-2.036 1.164-4.219 1.746-6.401 1.746Z'
        >
        </path>
      </g>
      <path
        class='drop'
        fill='#03413B'
        d='M223.564 239.191c0 14.838-12.074 27.058-27.058 27.058s-27.058-12.074-27.058-27.058 27.058-53.971 27.058-53.971 27.058 39.133 27.058 53.971Z'
      >
      </path>
    </svg>
    <ul>
      {items?.map((item, i) => <li style={{ "animation-delay": `${i * 0.12 + 0.5}s` }}>{item}</li>)}
    </ul>
    <div class='icons'>
      <div class='icon'>
        <!-- prettier-ignore -->
        <svg xmlns="http://www.w3.org/2000/svg" width="37" height="37" viewBox="0 0 37 37" fill="none"><path fill="#066A62" d="M33.796 24.125h-9.675a.564.564 0 0 1-.562-.563c0-.309.253-.562.562-.562h9.675a.522.522 0 0 0 .388-.163.564.564 0 0 0 .175-.4.564.564 0 0 0-.563-.562h-9.675a.564.564 0 0 1-.562-.563c0-.309.253-.562.562-.562h9.675c.928 0 1.688.76 1.688 1.688 0 .455-.18.883-.501 1.198a1.64 1.64 0 0 1-1.187.489Z"/><path fill="#066A62" d="M13.096 24.125H3.421c-.928 0-1.687-.76-1.687-1.688 0-.455.18-.883.5-1.198.304-.315.732-.489 1.187-.489h9.675c.31 0 .563.253.563.563 0 .309-.254.562-.563.562H3.421a.522.522 0 0 0-.388.163.564.564 0 0 0-.174.4c0 .309.253.562.562.562h9.675c.31 0 .563.253.563.563 0 .309-.254.562-.563.562Z"/><path fill="#066A62" d="M18.609 26.375a3.942 3.942 0 0 1-3.938-3.938A3.942 3.942 0 0 1 18.61 18.5a3.942 3.942 0 0 1 3.937 3.938 3.942 3.942 0 0 1-3.937 3.937Zm0-6.75a2.814 2.814 0 0 0 0 5.625 2.814 2.814 0 0 0 0-5.625Z"/><path fill="#066A62" d="M23.109 30.875h-1.232l-.709-3.302a.568.568 0 0 0-.67-.433.568.568 0 0 0-.433.67l.659 3.065h-4.236l.658-3.066a.564.564 0 0 0-1.102-.236l-.71 3.302h-1.231c-.456 0-.883.18-1.187.49-.32.314-.5.742-.5 1.198 0 .928.759 1.687 1.687 1.687h2.25c.31 0 .563-.253.563-.563a.564.564 0 0 0-.563-.562h-2.25a.564.564 0 0 1-.563-.563c0-.151.057-.286.175-.399a.531.531 0 0 1 .388-.163h9c.31 0 .563.253.563.563a.534.534 0 0 1-.175.399.532.532 0 0 1-.388.163h-4.5a.564.564 0 0 0-.563.563c0 .309.254.562.563.562h4.5c.456 0 .883-.18 1.187-.49.32-.314.5-.742.5-1.197 0-.929-.759-1.688-1.687-1.688h.006Z"/><path fill="#066A62" d="M30.646 16.813h-.045a.561.561 0 0 1-.512-.608l.422-5.062a.561.561 0 1 1 1.12.096l-.422 5.062a.564.564 0 0 1-.563.517v-.005Z"/><path fill="#066A62" d="M34.212 5.18a.558.558 0 0 0-.416-.18H23.671a.579.579 0 0 0-.416.18.57.57 0 0 0-.146.428l.562 6.75a.561.561 0 1 0 1.12-.096l-.276-3.33h8.432l-.799 9.562h-6.84l-.332-3.982a.561.561 0 1 0-1.12.095l.378 4.5c.022.293.27.518.562.518h7.875a.568.568 0 0 0 .563-.517l1.125-13.5a.57.57 0 0 0-.147-.428Zm-9.787 2.633-.14-1.688h8.904l-.14 1.688h-8.624Z"/><path fill="#066A62" d="M10.925 7.25c-.883 0-1.508.276-2.042.585a8.28 8.28 0 0 0-.163-1.052c.079 0 .163.006.253.006.63 0 1.558-.118 2.16-.715.934-.928.709-2.62.675-2.812a.573.573 0 0 0-.473-.473c-.19-.028-1.895-.253-2.829.67-.315.315-.495.714-.602 1.113a5.529 5.529 0 0 0-1.468-1.71.564.564 0 0 0-.787.113.564.564 0 0 0 .112.787C7.156 4.81 7.59 6.637 7.724 7.65a3.704 3.704 0 0 0-1.693-.399c-2.655 0-4.309 1.716-4.309 4.477 0 2.762 1.536 7.898 5.243 7.898.546 0 1.052-.197 1.507-.585.456.388.962.585 1.508.585 3.707 0 5.242-5.147 5.242-7.898 0-2.75-1.648-4.477-4.308-4.477h.01Zm-1.62-2.987c.32-.32.956-.394 1.429-.382 0 .455-.068 1.085-.389 1.4-.32.32-.967.383-1.428.388 0-.455.067-1.085.388-1.4v-.006ZM9.99 18.5c-.377 0-.731-.203-1.074-.619a.559.559 0 0 0-.433-.202.558.558 0 0 0-.433.202c-.344.416-.692.619-1.075.619-2.74 0-4.117-4.342-4.117-6.773 0-2.131 1.158-3.352 3.183-3.352.805 0 1.3.315 1.874.68.095.057.185.119.28.175.18.112.411.112.591 0 .096-.056.186-.118.282-.174.573-.366 1.063-.681 1.873-.681 2.02 0 3.184 1.22 3.184 3.352 0 2.43-1.379 6.773-4.118 6.773h-.017Z"/></svg>
      </div>
      <div class='icon'>
        <!-- prettier-ignore -->
        <svg xmlns="http://www.w3.org/2000/svg" width="53" height="53" viewBox="0 0 53 53" fill="none"><path fill="#066A62" d="M24.779 10.466h-13A2.445 2.445 0 0 1 9.34 8.03 2.445 2.445 0 0 1 11.78 5.59h1.625a.815.815 0 0 0 .812-.812 2.445 2.445 0 0 1 2.438-2.438h3.25A2.445 2.445 0 0 1 22.34 4.78c0 .446.366.812.813.812h1.625a2.445 2.445 0 0 1 2.437 2.438 2.445 2.445 0 0 1-2.437 2.437Zm-13-3.25a.815.815 0 0 0-.813.813c0 .446.366.812.813.812h13a.815.815 0 0 0 .812-.812.815.815 0 0 0-.812-.813h-1.625a2.445 2.445 0 0 1-2.438-2.437.815.815 0 0 0-.812-.813h-3.25a.815.815 0 0 0-.813.813 2.445 2.445 0 0 1-2.437 2.437h-1.625Z"/><path fill="#066A62" d="M27.777 47.841H6.09A4.064 4.064 0 0 1 2.03 43.78V25.904c0-.447.365-.813.812-.813.447 0 .813.366.813.813v17.875a2.445 2.445 0 0 0 2.437 2.437h21.686c.447 0 .812.366.812.813a.815.815 0 0 1-.812.812Z"/><path fill="#066A62" d="M2.841 23.466a.815.815 0 0 1-.812-.812V11.279A4.064 4.064 0 0 1 6.09 7.216h.813c.447 0 .812.366.812.813a.815.815 0 0 1-.812.812H6.09a2.445 2.445 0 0 0-2.437 2.438v11.375a.815.815 0 0 1-.813.812Z"/><path fill="#066A62" d="M33.716 23.937a.815.815 0 0 1-.812-.812V11.279a2.445 2.445 0 0 0-2.438-2.438h-.812a.815.815 0 0 1-.813-.812c0-.447.366-.813.813-.813h.812a4.064 4.064 0 0 1 4.063 4.063v11.846a.815.815 0 0 1-.813.812Z"/><path fill="#066A62" d="M12.591 21.029H7.716a.815.815 0 0 1-.812-.813v-4.875c0-.447.365-.812.812-.812h4.875c.447 0 .813.365.813.812v4.875a.815.815 0 0 1-.813.813ZM8.53 19.404h3.25v-3.25h-3.25v3.25Z"/><path fill="#066A62" d="M12.591 31.591H7.716a.815.815 0 0 1-.812-.812v-4.875c0-.447.365-.813.812-.813h4.875c.447 0 .813.366.813.813v4.875a.815.815 0 0 1-.813.812ZM8.53 29.966h3.25v-3.25h-3.25v3.25Z"/><path fill="#066A62" d="M12.591 42.154H7.716a.815.815 0 0 1-.812-.813v-4.875c0-.447.365-.812.812-.812h4.875c.447 0 .813.365.813.812v4.875a.815.815 0 0 1-.813.813ZM8.53 40.529h3.25v-3.25h-3.25v3.25Z"/><path fill="#066A62" d="M28.841 16.966H17.466a.815.815 0 0 1-.812-.812c0-.447.365-.813.812-.813h11.375c.447 0 .813.366.813.813a.815.815 0 0 1-.813.812Z"/><path fill="#066A62" d="M22.341 20.216h-4.875a.815.815 0 0 1-.812-.812c0-.447.365-.813.812-.813h4.875c.447 0 .813.366.813.813a.815.815 0 0 1-.813.812Z"/><path fill="#066A62" d="M22.837 27.529h-5.37a.815.815 0 0 1-.813-.813c0-.447.365-.812.812-.812h5.37c.448 0 .813.365.813.812a.815.815 0 0 1-.812.813Z"/><path fill="#066A62" d="M21.171 30.779h-3.705a.815.815 0 0 1-.812-.813c0-.447.365-.812.812-.812h3.705c.447 0 .813.365.813.812a.815.815 0 0 1-.813.813Z"/><path fill="#066A62" d="M21.399 38.091h-3.933a.815.815 0 0 1-.812-.812c0-.447.365-.813.812-.813H21.4c.447 0 .812.366.812.813a.815.815 0 0 1-.812.812Z"/><path fill="#066A62" d="M22.341 41.341h-4.875a.815.815 0 0 1-.812-.812c0-.447.365-.813.812-.813h4.875c.447 0 .813.366.813.813a.815.815 0 0 1-.813.812Z"/><path fill="#066A62" d="M36.966 51.091c-.146 0-.3-.04-.43-.122-.545-.341-13.382-8.474-13.382-17.956 0-4.371 3.51-7.922 7.816-7.922 2.503 0 4.623 1.625 5.996 3.429 1.373-1.796 3.494-3.429 5.997-3.429 4.306 0 7.816 3.55 7.816 7.922 0 3.282-1.536 6.744-4.566 10.31a.812.812 0 1 1-1.235-1.056c2.77-3.258 4.176-6.37 4.176-9.254 0-3.47-2.779-6.297-6.191-6.297-2.3 0-4.29 1.974-5.298 3.664-.292.496-1.105.496-1.397 0-1.008-1.69-2.999-3.664-5.298-3.664-3.412 0-6.191 2.828-6.191 6.297 0 7.67 9.977 14.804 12.187 16.29a44.018 44.018 0 0 0 5.834-4.72.81.81 0 0 1 1.146.016.81.81 0 0 1-.017 1.146c-3.241 3.144-6.402 5.135-6.54 5.216a.824.824 0 0 1-.43.122l.007.008Z"/><path fill="#066A62" d="M38.591 42.966h-.065a.805.805 0 0 1-.69-.512l-2.495-6.24-.87 2.178a.812.812 0 0 1-.755.512h-4.062a.815.815 0 0 1-.813-.813c0-.447.366-.812.813-.812h3.51l1.422-3.551a.812.812 0 0 1 1.51 0l2.642 6.606 1.592-2.657a.822.822 0 0 1 .699-.398h3.25c.447 0 .812.365.812.812a.815.815 0 0 1-.812.813h-2.787l-2.202 3.664a.822.822 0 0 1-.699.398Z"/></svg>
      </div>
    </div>
  </div>
  <header>
    <Markdown tag={index === 0 ? "h1" : "h2"}>{heading}</Markdown>
    <Markdown class='paragraph'>{paragraph}</Markdown>
    <div class='cta-wrapper'>
      {cta?.map(cta => <Button {...cta} />)}
    </div>
  </header>
</section>

<style lang='scss'>
  .EffectiveApproach {
    display: grid;
    align-items: center;
    gap: clamp(48px, calc(82vw / 7.68), 82px) 16px;
    @media (min-width: 1000px) {
      grid-template-columns: 1fr 1fr;
    }
    &[data-active="true"] {
      .wrapper {
        .logo {
          animation-play-state: running;
          g {
            animation-play-state: running;
          }
          .drop {
            animation-play-state: running;
          }
        }
        li {
          animation-play-state: running;
        }
        .icon {
          animation-play-state: running;
        }
      }
    }
  }
  header {
    .paragraph {
      margin: clamp(12px, calc(20vw / 7.68), 20px) 0 clamp(24px, calc(36vw / 7.68), 36px);
    }
  }
  .wrapper {
    perspective: 300px;
    .logo {
      max-width: 393px;
      width: 100%;
      margin: 0 auto;
      animation: EffectiveApproach-logo-spin 2s var(--easing) forwards paused;
      @keyframes EffectiveApproach-logo-spin {
        0% {
          transform: rotateY(180deg) rotateX(13deg);
        }
      }
      g {
        animation: EffectiveApproach-logo-g 2.5s var(--easing) forwards paused;
        @keyframes EffectiveApproach-logo-g {
          100% {
            transform: rotate(0);
          }
        }
        &:nth-child(1) {
          transform: rotate(60deg) translate(-5px, -68px);
          transform-box: fill-box;
          transform-origin: right bottom;
        }
        &:nth-child(2) {
          transform: rotate(30deg) translate(27px, -23px);
          transform-box: fill-box;
          transform-origin: right bottom;
          animation-delay: 0.1s;
        }
        &:nth-child(4) {
          transform: rotate(-30deg) translate(-27px, -23px);
          transform-box: fill-box;
          transform-origin: left bottom;
          animation-delay: 0.1s;
        }
        &:nth-child(5) {
          transform: rotate(-60deg) translate(5px, -68px);
          transform-box: fill-box;
          transform-origin: left bottom;
        }
      }
      .drop {
        animation: EffectiveApproach-logo-drop 2.5s var(--easing) both paused;
        @keyframes EffectiveApproach-logo-drop {
          0% {
            transform: translateY(-10%);
          }
          100% {
            transform: translateY(0);
          }
        }
      }
    }
    padding: clamp(48px, calc(74vw / 7.68), 74px) 0 clamp(42px, calc(56vw / 7.68), 56px);
    position: relative;
    ul {
      li {
        animation: EffectiveApproach-list 1.1s var(--easing) both paused;
        @keyframes EffectiveApproach-list {
          0% {
            transform: translateY(21px);
            opacity: 0;
          }
          100% {
            transform: translateY(0);
            opacity: 1;
          }
        }
        border-radius: 4px;
        border: 1px solid var(--primary-400, #6bd6cd);
        background: var(--background-100, #fffcf9);
        padding: clamp(6px, calc(9vw / 7.68), 9px) clamp(6px, calc(9vw / 7.68), 12px);
        position: absolute;
        &:nth-child(1) {
          top: 0;
          left: 7%;
        }
        &:nth-child(2) {
          top: 25%;
          right: 0;
          font-size: 0.95em;
        }
        &:nth-child(3) {
          bottom: 11%;
          left: 0;
          font-size: 0.9em;
          background: var(--primary-50, #f3fefd);
        }
        &:nth-child(4) {
          bottom: 0;
          left: 32%;
          font-size: 0.85em;
          z-index: -1;
        }
        &:nth-child(5) {
          bottom: 9%;
          right: 6%;
          font-size: 0.8em;
          background: var(--primary-50, #f3fefd);
        }
      }
    }
    .icons {
      .icon {
        display: grid;
        place-items: center;
        width: clamp(42px, calc(60vw / 7.68), 60px);
        height: clamp(42px, calc(60vw / 7.68), 60px);
        &:nth-child(1) {
          top: 8%;
          left: 40%;
          @media (max-width: 499px) {
            left: 60%;
          }
          animation-delay: 1.4s;
        }
        &:nth-child(2) {
          width: clamp(54px, calc(76vw / 7.68), 76px);
          height: clamp(54px, calc(76vw / 7.68), 76px);
          right: 8%;
          bottom: 22%;
          animation-delay: 1.5s;
        }
        position: absolute;
        border-radius: 50%;
        background: linear-gradient(239deg, #f3fffe, #d0f5f3);
        svg {
          width: 60%;
          display: block;
        }
        animation: EffectiveApproach-icons 1.1s var(--easing) both paused;
      }
      @keyframes EffectiveApproach-icons {
        0% {
          transform: scale(0);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
    }
  }
</style>

<script>
  const options = {
    root: null,
    rootMargin: `0px 0px -${window.innerHeight / 3}px 0px`,
    threshold: 0,
  };
  const observer = new IntersectionObserver(entries => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.setAttribute("data-active", "true");
        observer.unobserve(entry.target);
      }
    });
  }, options);
  document.querySelectorAll(".EffectiveApproach").forEach(element => {
    observer.observe(element);
  });
</script>
